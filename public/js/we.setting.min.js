WE.api=WE.api||{};WE.api.SettingModel=function(){this.updateSummaryUrl="/sys/user_summary"};WE.api.SettingModel.prototype=WE.BaseModel.prototype;WE.api.SettingModel.prototype.updateUserSummery=function(a){this.post(this.updateSummaryUrl,{summary:a})};WE.pageSetting={init:function(){this.regEvent()},regEvent:function(){var a=this,b=$("#modifyForm");this.ui={modifyBtn:$("#modify"),modifyForm:b,unModifyBtn:b.find(".out"),des:$("#des"),modifyInput:$("#modifyInput"),summery:$("#summery")};this.summery=this.ui.summery.text();this.ui.modifyBtn.click(function(){a.ui.modifyInput.val(a.summery);a.ui.modifyForm.show();a.ui.des.hide()});this.ui.unModifyBtn.click(function(){a.ui.modifyForm.hide();a.ui.des.show()});this.ui.modifyForm.submit(function(){var b=
a.ui.modifyInput.val();a.ui.modifyInput.val().length<300&&b!=a.summery&&a.postForm(b);return!1})},postForm:function(a){var b=this,c=new WE.api.SettingModel,d=new WE.Controller;d.update=function(c){if(c.data.code==0)b.ui.summery.html(WE.kit.chatFormate(a)),b.summery=a,b.ui.modifyForm.hide(),b.ui.des.show()};c.addObserver(d);c.updateUserSummery(a)}};
