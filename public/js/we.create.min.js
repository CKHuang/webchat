/*! vchat.co 2014-01-01 03:06:28 */
WE.pageCreate={init:function(){var a=$("#create");this.ui={form:a,topic:$("#topic"),desBox:$("#des-box"),pwdBox:$("#pwd-box"),infoBox:$("#info-box")},this.regEvent()},regEvent:function(){var a=this;this.ui.desBox.find(".des-btn").click(function(){return a.ui.desBox.find(".input-content").is(":hidden")?(a.ui.desBox.find(".input-content").removeClass("hidden"),$(this).find(".icon-pen").removeClass("icon-pen").addClass("icon-close")):(a.ui.desBox.find(".input-content").addClass("hidden"),$(this).find(".icon-close").addClass("icon-pen").removeClass("icon-close")),!1}),this.ui.pwdBox.find(".pwd-btn").click(function(){return a.ui.pwdBox.find(".input-content").is(":hidden")?(a.ui.pwdBox.find(".input-content").removeClass("hidden"),a.ui.pwdBox.find(".header").css({"border-bottom":"#F0E02F solid 1px"}),$(this).find(".icon-pen").removeClass("icon-pen").addClass("icon-close")):(a.ui.pwdBox.find(".input-content").addClass("hidden"),a.ui.pwdBox.find(".header").css({"border-bottom":"0"}),$(this).find(".icon-close").addClass("icon-pen").removeClass("icon-close")),!1}),this.ui.form.submit(function(b){b.preventDefault();var c=$.trim(a.ui.topic.val());return""==c?!1:(a.createTopic(),void 0)})},createTopic:function(){var a=$.trim(this.ui.topic.val()),b=$.trim(this.ui.desBox.find("textarea").val()),c=$.trim(this.ui.pwdBox.find("input").val()),d=new WE.api.RoomModel,e=new WE.Controller;e.update=function(a){var b=a.data;0==b.code&&(location.href="/t/"+b.result.id)},d.addObserver(e),d.create(a,b,c)}};